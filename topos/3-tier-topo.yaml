name: 3-tier-topology

nodes:
  - name: r1
    type: frr
    image: containernet/frr-full:4.0.2
    interfaces:
      eth0:
        ip: 192.168.1.1/24
      eth1:
        ip: 10.0.1.1/24
      eth2:
        ip: 10.0.2.1/24

  - name: s1
    type: cumulus
    image: cumulus/cumulusvx:4.2.0
    interfaces:
      eth0:
        ip: 192.168.1.2/24
      eth1:
        ip: 10.0.1.2/24

  - name: s2
    type: cumulus
    image: cumulus/cumulusvx:4.2.0
    interfaces:
      eth0:
        ip: 192.168.1.3/24
      eth1:
        ip: 10.0.2.2/24

  - name: h1
    type: linux
    image: containernet/debian:buster
    interfaces:
      eth0:
        ip: 10.0.1.10/24

  - name: h2
    type: linux
    image: containernet/debian:buster
    interfaces:
      eth0:
        ip: 10.0.2.10/24

connections:
  - cables:
    - r1:eth1 s1:eth1
    - r1:eth2 s2:eth1
    - s1:eth2 s2:eth2
    - s1:eth3 h1:eth0
    - s2:eth3 h2:eth0